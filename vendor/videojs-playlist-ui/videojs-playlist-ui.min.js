/**
 * videojs-playlist-ui
 * @version 2.3.4
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):t(e.videojs)}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e="default"in e?e["default"]:e;var s,l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a={},o=(Object.freeze||Object)({"default":a}),r=o&&a||o,p=void 0!==l?l:"undefined"!=typeof window?window:{};"undefined"!=typeof document?s=document:(s=p["__GLOBAL_DOCUMENT_CACHE@4"])||(s=p["__GLOBAL_DOCUMENT_CACHE@4"]=r);var d,c=s,u=d="undefined"!=typeof window?window:void 0!==l?l:"undefined"!=typeof self?self:{},h=e.dom||e,m=e.registerPlugin||e.plugin,y=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},f={className:"vjs-playlist",playOnSelect:!1,supportsCssPointerEvents:function(){var e=c.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}()},v=function(e){e.addClass("vjs-selected")},C=function(e){e.removeClass("vjs-selected"),e.thumbnail&&h.removeClass(e.thumbnail,"vjs-playlist-now-playing")},w=function(e){if(!e){var t=c.createElement("div");return t.className="vjs-playlist-thumbnail",t}var i=c.createElement("picture");if(i.className="vjs-playlist-thumbnail","string"==typeof e){var n=c.createElement("img");n.src=e,i.appendChild(n)}else{for(var s=0;s<e.length-1;s++){var l=e[s],a=c.createElement("source");for(var o in l)a[o]=l[o];i.appendChild(a)}var r=e[e.length-1],p=c.createElement("img");for(var d in r)p[d]=r[d];i.appendChild(p)}return i},_=e.getComponent("Component"),j=function(s){function l(e,n,a){if(t(this,l),!n.item)throw new Error("Cannot construct a PlaylistMenuItem without an item option");var o=i(this,s.call(this,e,n));return o.item=n.item,o.playOnSelect=a.playOnSelect,o.emitTapEvents(),o.on(["click","tap"],o.switchPlaylistItem_),o.on("keydown",o.handleKeyDown_),o.on(["focus","mouseover"],o.addPlayIcon_),o.on(["blur","mouseout"],o.removePlayIcon_),o}return n(l,s),l.prototype.handleKeyDown_=function(e){13!==e.which&&32!==e.which||this.switchPlaylistItem_()},l.prototype.switchPlaylistItem_=function(e){this.player_.playlist.currentItem(y(this.player_.playlist(),this.item)),this.playOnSelect&&this.player_.play()},l.prototype.addPlayIcon_=function(){h.addClass(this.thumbnail,"vjs-icon-play"),h.removeClass(this.thumbnail,"vjs-playlist-now-playing")},l.prototype.removePlayIcon_=function(){c.activeElement!==this.el()&&(h.removeClass(this.thumbnail,"vjs-icon-play"),this.hasClass("vjs-selected")&&h.addClass(this.thumbnail,"vjs-playlist-now-playing"))},l.prototype.createEl=function(){var t=c.createElement("li"),i=this.options_.item;if(t.className="vjs-playlist-item",t.setAttribute("tabIndex",0),this.thumbnail=w(i.thumbnail),t.appendChild(this.thumbnail),i.duration){var n=c.createElement("time"),s=e.formatTime(i.duration);n.className="vjs-playlist-duration",n.setAttribute("datetime","PT0H0M"+i.duration+"S"),n.appendChild(c.createTextNode(s)),t.appendChild(n)}var l=c.createElement("cite"),a=i.name||this.localize("Untitled Video");if(l.className="vjs-playlist-name",l.appendChild(c.createTextNode(a)),l.setAttribute("title",a),t.appendChild(l),i.description){var o=c.createElement("p");o.className="vjs-playlist-description",o.appendChild(c.createTextNode(i.description)),o.setAttribute("title",i.description),t.appendChild(o)}return t},l}(_),b=function(s){function l(n,a){if(t(this,l),!n.playlist)throw new Error("videojs-playlist is required for the playlist component");var o=i(this,s.call(this,n,a));return o.items=[],a.supportsCssPointerEvents&&o.addClass("vjs-csspointerevents"),o.createPlaylist_(),e.browser.TOUCH_ENABLED||o.addClass("vjs-mouse"),n.on(["loadstart","playlistchange"],function(e){o.update()}),n.on("adstart",function(){o.addClass("vjs-ad-playing")}),n.on("adend",function(){n.ended()?n.one("ended",function(){o.removeClass("vjs-ad-playing")}):o.removeClass("vjs-ad-playing")}),o}return n(l,s),l.prototype.createEl=function(){var e=this.options_;if(e.el)return e.el;var t=c.createElement("ol");return t.className=e.className,e.el=t,t},l.prototype.createPlaylist_=function(){for(var e=this.player_.playlist()||[],t=0;t<this.items.length;t++)this.removeChild(this.items[t]);this.items.length=0;var i=this.el_.querySelector(".vjs-playlist-ad-overlay");i&&i.parentNode.removeChild(i);for(var n=0;n<e.length;n++){var s=new j(this.player_,{item:e[n]},this.options_);this.items.push(s),this.addChild(s)}(i=c.createElement("li")).className="vjs-playlist-ad-overlay",this.el_.appendChild(i);var l=this.player_.playlist.currentItem();if(this.items.length&&l>=0){v(this.items[l]);var a=this.items[l].$(".vjs-playlist-thumbnail");a&&h.addClass(a,"vjs-playlist-now-playing")}},l.prototype.update=function(){var e=this.player_.playlist();if(this.items.length!==e.length)return void this.createPlaylist_();for(var t=0;t<this.items.length;t++)if(this.items[t].item!==e[t])return void this.createPlaylist_();for(var i=this.player_.playlist.currentItem(),n=0;n<this.items.length;n++){var s=this.items[n];n===i?(v(s),c.activeElement!==s.el()&&h.addClass(s.thumbnail,"vjs-playlist-now-playing")):C(s)}},l}(_),g=function(t){var i=this,n=void 0,s=void 0;if(!i.playlist)throw new Error("videojs-playlist is required for the playlist component");"undefined"!=typeof u.HTMLElement&&t instanceof u.HTMLElement||t&&1===t.nodeType?(s=t,n=e.mergeOptions(f)):(n=e.mergeOptions(f,t),s=c.querySelector("."+n.className)),n.el=s,i.playlistMenu=new b(i,n)};e.registerComponent("PlaylistMenu",b),e.registerComponent("PlaylistMenuItem",j),m("playlistUi",g)});